(()=>{var e={175:e=>{"use strict";var t=/(?:https?:)?\/\/(?:(?:[\w-]+\.)+[\w/#@~.-]*)(?:\?(?:[\w&=.!,;$#%-]+)?)?/gi;e.exports=function(e){return(e||"").replace(t,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n),i.d(n,{components:()=>h,extend:()=>y});const e=flarum.core.compat["admin/app"];var t=i.n(e);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}const a=flarum.core.compat["common/components/Alert"];var s=i.n(a);const o=flarum.core.compat["admin/components/ExtensionPage"];var p=i.n(o);const d=flarum.core.compat["common/helpers/humanTime"];var l=i.n(d);const c=flarum.core.compat["common/utils/extractText"];var g=i.n(c);const u=flarum.core.compat["common/utils/ItemList"];var v=i.n(u),f=i(175),w=i.n(f),b=function(e){var i,n;function a(){return e.apply(this,arguments)||this}n=e,(i=a).prototype=Object.create(n.prototype),i.prototype.constructor=i,r(i,n);var o=a.prototype;return o.content=function(){var e=this.setting("piwind-geoip.service")(),i=1e3*Number(t().data.settings["piwind-geoip.services."+e+".last_error_time"]),n=t().data.settings["piwind-geoip.services."+e+".error"];return m("div",{className:"GeoipSettingsPage"},m("div",{className:"container"},m("div",{className:"GeoipSettingsTabPage GeoipSettingsPage--settings"},m("div",{className:"Form"},n&&m(s(),{className:"Form-group",dismissable:!1},m("b",{style:{textTransform:"uppercase",marginRight:"5px"}},l()(new Date(i))),n),this.settingsItems().toArray(),m("div",{className:"Form-group"},this.submitButton())))))},o.settingsItems=function(){var e=new(v());return e.add("general",m("div",{className:"Section"},m("h3",null,t().translator.trans("piwind-geoip.admin.settings.general.heading")),m("p",{className:"helpText"},t().translator.trans("piwind-geoip.admin.settings.general.help")),this.generalItems().toArray())),e.add("providers",m("div",{className:"Section"},m("h3",null,t().translator.trans("piwind-geoip.admin.settings.providers.heading")),m("p",{className:"helpText"},t().translator.trans("piwind-geoip.admin.settings.providers.help")),this.providerItems().toArray())),e},o.generalItems=function(){var e=new(v());return e.add("show-flags",this.buildSettingComponent({setting:"piwind-geoip.showFlag",type:"boolean",label:t().translator.trans("piwind-geoip.admin.settings.show_flag_label"),help:t().translator.trans("piwind-geoip.admin.settings.show_flag_help")})),e},o.providerItems=function(){var e=new(v()),i=this.setting("piwind-geoip.service")();return e.add("service",this.buildSettingComponent({type:"select",setting:"piwind-geoip.service",label:t().translator.trans("piwind-geoip.admin.settings.service_label"),options:t().data["piwind-geoip.services"].reduce((function(e,i){return e[i]=g()(t().translator.trans("piwind-geoip.admin.settings.service_"+i+"_label")),e}),{}),required:!0,help:i&&m.trust(w()(g()(t().translator.trans("piwind-geoip.admin.settings.service_"+i+"_description"))))})),["ipdata","ipapi-pro","ipsevenex"].includes(i)&&e.add("api-key",this.buildSettingComponent({type:"string",setting:"piwind-geoip.services."+i+".access_key",label:t().translator.trans("piwind-geoip.admin.settings.access_key_label"),required:!0})),"ipdata"===i&&e.add("ipdata-quota",this.buildSettingComponent({type:"number",setting:"piwind-geoip.services.ipdata.quota",label:t().translator.trans("piwind-geoip.admin.settings.quota_label"),min:1500,placeholder:1500})),e},a}(p()),h={GeoipSettingsPage:b};const y=[].concat([]);t().initializers.add("piwind/geoip",(function(){t().extensionData.for("piwind-geoip").registerPage(b).registerPermission({icon:"fas fa-globe",permission:"piwind-geoip.canSeeCountry",label:t().translator.trans("piwind-geoip.admin.permissions.see_country")},"moderate",50)}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map